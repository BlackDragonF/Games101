## 视角和宽高比
垂直视角(field of view/fovY) - 平面上中点、原点、平面下中点所形成的夹角
宽高比(aspect ratio) - 宽度 / 高度
$$ tan\frac{fovY}{2} = \frac{t}{|n|} $$
$$ aspect = \frac{r}{t} $$
## 屏幕
定义
- 像素数组(二维)
- 数组的大小称为分辨率
- 典型的光栅成像设备

> Raster(光栅)  - 德语中的屏幕，Rasterize(光栅化) - 画到屏幕上
### 像素
Pixel，picture element 的缩写
目前可以认为像素是一个有一致颜色的小矩形，颜色是由 RGB 红绿蓝三种颜色组合而成的
### 屏幕空间
左下角为原点 $O$，右方为 $X$ 轴，上方为 $Y$ 轴的坐标系
- 像素可以表示为 $(x, y)$ 的形式，其中 $x$ 和 $y$ 均为整数
- 像素的取值为 $(0, 0)$ 到 $(width - 1, height - 1)$
- 像素 $(x, y)$ 的中点为 $(x + 0.5, y + 0.5)$
- 屏幕包括从 $(0, 0)$ 到 $(width, height)$ 的范围
### 标准立方体到屏幕
- 暂时与 $z$ 轴无关
- 将 $xy$ 平面的 $[-1, 1]^{2}$ 变换到 $[0, width] \times [0, height]$

视口(viewport)变换矩阵：
$$ M_{viewport} = \begin{pmatrix} \frac{width}{2} & 0 & 0 & \frac{width}{2} \\ 0 & \frac{height}{2} & 0 & \frac{height}{2} \\ 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 1 \end{pmatrix} $$
## 光栅化
将三角形光栅化到像素
### 光栅显示设备
#### 示波器
成像原理：阴极射线管(Cathode Ray Tube/CRT)
隔行扫描技术
 - 优点 - 只有一半的工作量
 - 缺点 - 会产生严重的撕裂现象
#### 帧缓冲区
用于光栅化展示的内存空间
#### LCD(Liquid Crystal Display) 液晶显示设备
通过液体的不同排布影响光的极化 - 光的偏振性，只让某种方向的光通过光栅来达到显示/不显示某个像素的效果
#### LED 显示设备
发光二极管只有发光/不发光两个状态
#### 电子墨水显示设备
通过电压控制墨水黑色在上还是白色在上，但刷新率很低
### 三角形网格
三角形是最基本的多边形，可以将其他多边形划分成三角形的组合
三角形唯一确定了一个平面
三角形内部外部定义很明确
三角形有很好的插值方法
### 最简单的光栅化 - 采样
在采样的点上执行函数判断像素是否需要展示
本质是将函数离散化

采样是图形学的核心思想，对时间(一维)采样、平面(二维)采样、方向(二维)采样、声音(三维)采样、...

判断每个像素的中心是否位于三角形内
定义函数 `inside(t, x, y)` 判断点 `(x, y)` 是否位于三角形内，位于则返回 `1` ，否则返回 `0`，其中 `x` 和 `y` 为浮点数
可以使用叉积判断点是否在三角形内

> 边界条件可以不严格处理、也可以做特殊处理

可以通过 boundingBox(包围盒) 来优化光栅化判断
可以提前算出每个三角形的最左最右像素来优化光栅化判断
### 真实的 LCD 屏幕像素
每个像素内部不是纯色，而是由红绿蓝组成的
对于 Bayer 模式，绿色的密度要多于红蓝两色的密度，因为人眼对绿色最敏感